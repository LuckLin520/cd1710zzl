"use strict";!function(i){function t(i,t,s,n){this.img=i,this.width=t,this.height=s,this.type=n||"slid",this.len=i.length,this.c=1,this.n=2,this.container=null,this.imgbox=null,this.dotbox=null,this.tabbox=null,this.timer=null}t.prototype={constructor:t,init:function(t){var s=this;this.container=t;this.container.html('<ul class="imgbox"></ul>\n\t\t\t\t\t\t<ul class="dotbox"></ul>\n\t\t\t\t\t\t<ul class="tabbox">\n\t\t\t\t\t\t\t<li class="lt"></li><li class="gt"></li>\n\t\t\t\t\t\t</ul>'),this.imgbox=this.container.children(".imgbox"),this.dotbox=this.container.children(".dotbox"),this.tabbox=this.container.children(".tabbox"),this.img.forEach(function(i){var t='<li><a href="'+i.href+'"><img src="'+i.url+'"></a></li>';s.imgbox.append(t),s.dotbox.append("<li></li>")}),"fade"===this.type?(this.imgbox.children("li").css({position:"absolute"}).eq(0).show().siblings().hide(),this.imgbox.css({width:this.width,height:this.height,position:"absolute"})):"slid"===this.type&&(this.imgbox.children("li").eq(0).clone(!0).appendTo(this.imgbox),this.imgbox.children("li").eq(this.len-1).clone(!0).prependTo(this.imgbox),this.len+=2,this.imgbox.children("li").css({float:"left"}),this.imgbox.css({width:this.width*this.len,height:this.height,position:"absolute",left:-this.width})),this.container.css({userSelect:"none",position:"relative",width:this.width,height:this.height,overflow:"hidden",display:"inline-block"}),this.imgbox.children("li").find("a img").css({width:this.width,height:this.height}),this.dotbox.css({position:"absolute",width:18*this.len,left:"calc(50% - "+18*this.len/2+"px)",bottom:"15px"}).children("li").css({width:"12px",height:"12px",float:"left",margin:"0 3px",borderRadius:"50%",background:"#ccc",cursor:"pointer"}).eq(0).css({background:"#a10000"}),this.tabbox.css({width:"100%",height:"15%",position:"absolute",top:"calc(50% - 20px)",display:"none"}).children("li").css({position:"absolute",lineHeight:"50px",textAlign:"center",cursor:"pointer",opacity:.8}).eq(1).css({right:"-21px",border:"25px solid transparent",borderLeft:"15px solid #ccc"}).hover(function(){i(this).css({borderLeftColor:"#a10000"})},function(){i(this).css({borderLeftColor:"#ccc"})}).prev(".lt").css({left:"-21px",border:"25px solid transparent",borderRight:"15px solid #ccc"}).hover(function(){i(this).css({borderRightColor:"#a10000"})},function(){i(this).css({borderRightColor:"#ccc"})}),this.container.children("ul").css({margin:0,padding:0,listStyle:"none"}),this.eventListener()},move:function(){var i=this,t=this.imgbox.children("li"),s=this.dotbox.children("li");if("fade"===this.type)this.n=this.n===this.len?0:-1===this.n?this.len-1:this.n,t.eq(this.n).finish().fadeIn(500).siblings("li").finish().fadeOut(500),s.eq(this.n).css({background:"#a10000"}).siblings("li").css({background:"#ccc"});else if("slid"===this.type){this.imgbox.finish().animate({left:-this.width*this.n},400,function(){1===i.n&&(i.n=i.len-1,i.c=i.len-2,i.imgbox.css({left:-i.width*i.c})),i.n===i.len&&(i.n=2,i.c=1,i.imgbox.css({left:-i.width}))});var n=this.n-1;n=-1===n?this.len-3:n===this.len-2?0:n,s.eq(n).css({background:"#a10000"}).siblings("li").css({background:"#ccc"})}this.c=this.n++},autoPlay:function(){var i=this;this.timer=setInterval(function(){i.move()},3e3)},eventListener:function(){var t=this;this.container.hover(function(){clearInterval(t.timer),t.tabbox.fadeIn()},function(){t.autoPlay(),t.tabbox.fadeOut()}),this.dotbox.on("mouseover","li",function(){"slid"===t.type?(t.n=i(this).index()+1,t.move()):"fade"===t.type&&(t.n=i(this).index(),t.move())});var s=!0,n=void 0;this.tabbox.on("click","li",function(){clearTimeout(n),s&&(s=!1,i(this).is(".lt")&&(t.n=--t.c),t.move()),n=setTimeout(function(){s=!0},400)})}},i.fn.extend({carousel:function(s,n,e,o){return this.each(function(h,l){var c=new t(s,n,e,o);c.init(i(l)),c.autoPlay()}),this}})}(jQuery);