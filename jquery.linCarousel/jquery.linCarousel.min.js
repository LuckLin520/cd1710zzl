"use strict";!function(l){function c(i,t,s,n){this.img=i,this.width=t,this.height=s,this.type=n||"slid",this.len=i.length,this.c=0,this.n=1,this.container=null,this.imgbox=null,this.dotbox=null,this.tabbox=null,this.timer=null}c.prototype={constructor:c,init:function(i){var s=this;this.container=i;this.container.html('<ul class="imgbox"></ul>\n\t\t\t\t\t\t<ul class="dotbox"></ul>\n\t\t\t\t\t\t<ul class="tabbox">\n\t\t\t\t\t\t\t<li><</li><li>></li>\n\t\t\t\t\t\t</ul>'),this.imgbox=this.container.children(".imgbox"),this.dotbox=this.container.children(".dotbox"),this.tabbox=this.container.children(".tabbox"),this.img.forEach(function(i){var t='<li><a href="'+i.href+'"><img src="'+i.url+'"></a></li>';s.imgbox.append(t),s.dotbox.append("<li></li>")}),"fade"===this.type?(this.imgbox.children("li").css({position:"absolute"}),this.imgbox.css({width:this.width,height:this.height,position:"absolute"})):"slid"===this.type&&(this.imgbox.children("li").eq(0).clone(!0).appendTo(this.imgbox),this.imgbox.children("li").eq(this.len-1).clone(!0).prependTo(this.imgbox),this.len+=2,this.imgbox.children("li").css({float:"left"}),this.imgbox.css({width:this.width*this.len,height:this.height,position:"absolute",left:-this.width})),this.container.css({position:"relative",width:this.width,height:this.height,overflow:"hidden",display:"inline-block"}),this.imgbox.children("li").find("a img").css({width:this.width,height:this.height}),this.dotbox.css({position:"absolute",width:18*this.len,left:"calc(50% - "+18*this.len/2+"px)",bottom:"15px"}).children("li").css({width:"12px",height:"12px",float:"left",margin:"0 3px",borderRadius:"50%",background:"#ccc",cursor:"pointer"}).eq(0).css({background:"red"}),this.tabbox.css({width:"100%",height:"50px",position:"absolute",top:"calc(50% - 25px)",display:"none"}).children("li").css({width:"18px",height:"50px",background:"#ccc",position:"absolute",lineHeight:"50px",textAlign:"center",cursor:"pointer"}).eq(1).css({right:"0"}),this.container.children("ul").css({margin:0,padding:0,listStyle:"none"}),this.eventListener()},move:function(){var i=this,t=this.imgbox.children("li"),s=this.dotbox.children("li");if("fade"===this.type)this.n=this.n===this.len?0:-1===this.n?this.len-1:this.n,t.eq(this.n).fadeIn(500).siblings("li").fadeOut(500),s.eq(this.n).css({background:"red"}).siblings("li").css({background:"#ccc"});else if("slid"===this.type){this.imgbox.finish().animate({left:-this.width*this.n},300,function(){1===i.n&&(i.n=i.len-1,i.c=i.len-2,i.imgbox.css({left:-i.width*i.c})),i.n===i.len&&(i.n=2,i.c=1,i.imgbox.css({left:-i.width}))});var n=this.n-1;n=-1===n?this.len-3:n===this.len-2?0:n,s.eq(n).css({background:"red"}).siblings("li").css({background:"#ccc"})}this.c=this.n++},autoPlay:function(){var i=this;this.timer=setInterval(function(){i.move()},3e3)},eventListener:function(){var i=this;this.container.hover(function(){clearInterval(i.timer),i.tabbox.fadeIn()},function(){i.autoPlay(),i.tabbox.fadeOut()}),this.dotbox.on("mouseover","li",function(){"slid"===i.type?(i.n=l(this).index()+1,i.move()):"fade"===i.type&&(i.n=l(this).index(),i.move())});var t=!0,s=void 0;this.tabbox.on("click","li",function(){clearTimeout(s),t&&(t=!1,l(this).is(":contains(<)")&&(i.n=--i.c),i.move()),s=setTimeout(function(){t=!0},300)})}},l.fn.extend({carousel:function(n,e,h,o){this.each(function(i,t){var s=new c(n,e,h,o);s.init(l(t)),s.autoPlay()})}})}(jQuery);