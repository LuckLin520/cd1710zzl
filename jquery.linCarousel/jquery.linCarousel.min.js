;(function(a){function b(c,d,e,f){this.img=c,this.width=d,this.height=e,this.type=f||"slid",this.len=c.length,this.c=0,this.n=1,this.container=null,this.imgbox=null,this.dotbox=null,this.tabbox=null,this.timer=null}b.prototype={constructor:b,init:function(c){this.container=c;let d=`<ul class="imgbox"></ul><ul class="dotbox"></ul><ul class="tabbox"><li><</li><li>></li></ul>`;this.container.html(d),this.imgbox=this.container.children(".imgbox"),this.dotbox=this.container.children(".dotbox"),this.tabbox=this.container.children(".tabbox"),this.img.forEach(e=>{let f=`<li><a href="${e.href}"><img src="${e.url}"></a></li>`;this.imgbox.append(f),this.dotbox.append("<li></li>")}),"fade"===this.type?(this.imgbox.children("li").css({position:"absolute"}),this.imgbox.css({width:this.width,height:this.height,position:"absolute"})):"slid"===this.type&&(this.imgbox.children("li").eq(0).clone(!0).appendTo(this.imgbox),this.imgbox.children("li").eq(this.len-1).clone(!0).prependTo(this.imgbox),this.len+=2,this.imgbox.children("li").css({float:"left"}),this.imgbox.css({width:this.width*this.len,height:this.height,position:"absolute",left:-this.width})),this.container.css({position:"relative",width:this.width,height:this.height,overflow:"hidden",display:"inline-block"}),this.imgbox.children("li").find("a img").css({width:this.width,height:this.height}),this.dotbox.css({position:"absolute",width:18*this.len,left:"40%",bottom:"15px"}).children("li").css({width:"12px",height:"12px",float:"left",margin:"0 3px",borderRadius:"50%",background:"#ccc",cursor:"pointer"}).eq(0).css({background:"red"}),this.tabbox.css({width:"100%",height:"50px",position:"absolute",top:"calc(50% - 25px)",display:"none"}).children("li").css({width:"18px",height:"50px",background:"#ccc",position:"absolute",lineHeight:"50px",textAlign:"center",cursor:"pointer"}).eq(1).css({right:"0"}),this.container.children("ul").css({margin:0,padding:0,listStyle:"none"}),this.eventListener()},move:function(){let c=this.imgbox.children("li"),d=this.dotbox.children("li");if("fade"===this.type)this.n=this.n===this.len?0:-1===this.n?this.len-1:this.n,c.eq(this.n).fadeIn(500).siblings("li").fadeOut(500),d.eq(this.n).css({background:"red"}).siblings("li").css({background:"#ccc"});else if("slid"===this.type){this.imgbox.finish().animate({left:-this.width*this.n},300,()=>{1===this.n&&(this.n=this.len-1,this.c=this.len-2,this.imgbox.css({left:-this.width*this.c})),this.n===this.len&&(this.n=2,this.c=1,this.imgbox.css({left:-this.width}))});let e=this.n-1;e=-1==e?this.len-3:e==this.len-2?0:e,d.eq(e).css({background:"red"}).siblings("li").css({background:"#ccc"})}this.c=this.n++},autoPlay:function(){this.timer=setInterval(()=>{this.move()},3e3)},eventListener:function(){let c=this;this.container.hover(function(){clearInterval(c.timer),c.tabbox.fadeIn()},function(){c.autoPlay(),c.tabbox.fadeOut()}),this.dotbox.on("mouseover","li",function(){"slid"===c.type?(c.n=a(this).index()+1,c.move()):"fade"===c.type&&(c.n=a(this).index(),c.move())});let e,d=!0;this.tabbox.on("click","li",function(){clearTimeout(e),d&&(d=!1,a(this).is(":contains(<)")&&(c.n=--c.c),c.move()),e=setTimeout(function(){d=!0},300)})}},a.fn.extend({carousel:function(c,d,e,f){this.each(function(g,h){let j=new b(c,d,e,f);j.init(a(h)),j.autoPlay()})}})})(jQuery);